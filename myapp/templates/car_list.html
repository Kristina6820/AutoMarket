{% extends 'base.html' %}
{% load static %}

{% block title %}Toate maÈ™inile | AutoMarket{% endblock %}

{% block extra_head %}


<style>
.cars-modern-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 32px;
    padding: 20px;
    margin-top: 20px;
}

/* Card */
.car-wow {
    position: relative;
    display: block;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 22px;
    overflow: hidden;
    padding-bottom: 14px;
    text-decoration: none !important;
    color: var(--text);
    backdrop-filter: blur(16px);
    box-shadow: 0 10px 45px rgba(0,0,0,0.4);
    transform: translateY(0px) scale(1);
    transition: 0.35s ease;
}
.car-wow:hover {
    transform: translateY(-6px) scale(1.015);
    box-shadow: 0 18px 60px rgba(0,0,0,0.6);
}

/* Badges */
.wow-badge-area {
    position: absolute;
    top: 12px;
    left: 12px;
    z-index: 20;
    display: flex;
    gap: 8px;
}

.wow-badge {
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 700;
}
.wow-badge.new {
    background: #6ef56e;
    color: #003100;
}
.wow-badge.used {
    background: #ffb347;
    color: #552900;
}
.wow-badge.sale {
    background: #ff4d4d;
    color: white;
}

/* Media */
.wow-media {
    position: relative;
    height: 210px;
    width: 100%;
    overflow: hidden;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

.wow-image, .wow-video {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: .4s ease;
}

.car-wow:hover .wow-video {
    opacity: 1;
}
.wow-video {
    opacity: 0;
}

/* Body */
.wow-body {
    padding: 18px;
}

.wow-body h3 {
    font-size: 22px;
    font-weight: 800;
    margin: 0 0 6px;
}

.meta {
    opacity: .75;
    font-size: 14px;
    margin-bottom: 10px;
}

.price {
    font-size: 24px;
    font-weight: 900;
    color: var(--accent);
}

.details {
    font-size: 14px;
    font-weight: 600;
    opacity: .75;
    display: inline-block;
    margin-top: 4px;
    transition: .2s;
}
.car-wow:hover .details {
    opacity: 1;
    transform: translateX(4px);
}


    body { background:#0b0f19; }
    .wrapper { max-width:1600px; margin:40px auto; padding:0 25px; color:#fff; display:grid; grid-template-columns:280px 1fr; gap:35px; }

    /* SIDEBAR FILTERS */
    .sidebar {
        background:rgba(255,255,255,0.04);
        border:1px solid rgba(255,255,255,0.08);
        border-radius:18px;
        padding:25px;
        backdrop-filter:blur(10px);
        height:max-content;
        box-shadow:0 15px 35px rgba(0,0,0,0.45);
        animation:fadeIn .6s ease;
    }
    @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}

    .sidebar h3 { margin-bottom:15px; font-weight:700; }
    .f-item { margin-bottom:18px; }
    .f-item label { font-size:14px; opacity:.7; margin-bottom:4px; display:block; }
    .f-item input, .f-item select {
        width:100%; padding:10px 12px; background:#151a2c; border-radius:10px;
        border:1px solid rgba(255,255,255,0.12); color:#fff;
    }

    /* SORT BAR */
    .sort-bar{ display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
    .sort-bar select{
        background:#151a2c; border:1px solid rgba(255,255,255,0.12);
        padding:10px 14px; border-radius:10px; color:#fff;
    }

    /* PROMO BANNER */
    .promo-banner{
        background:linear-gradient(90deg,#ffcc00,#ff8800);
        padding:22px 30px; border-radius:18px; margin-bottom:30px;
        color:#000; font-size:20px; font-weight:800; box-shadow:0 15px 35px rgba(0,0,0,0.45);
        animation:slideIn .8s ease;
    }
    @keyframes slideIn{from{opacity:0;transform:translateX(-40px);}to{opacity:1;transform:translateX(0);}}

    /* GRID */
    .cars-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(330px,1fr)); gap:32px; }

    .car-card{
        background:#111625; border-radius:20px; overflow:hidden;
        border:1px solid rgba(255,255,255,0.09);
        box-shadow:0 18px 30px rgba(0,0,0,0.55);
        transition:.25s ease; position:relative;
    }
    .car-card:hover{ transform:translateY(-8px); box-shadow:0 25px 45px rgba(0,0,0,0.7); }


    /* HOVER VIDEO PREVIEW */
    .car-video{ display:none; position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }
    .car-card:hover .car-video{ display:block; }
    .car-card:hover .car-image{ opacity:0; }

    .car-image{ width:100%; height:220px; object-fit:cover; transition:.2s; }

    .badge-row{ position:absolute; top:12px; left:12px; display:flex; gap:6px; z-index:10; }
    .badge{ padding:5px 10px; border-radius:12px; font-size:11px; font-weight:700; color:#fff; }
    .badge-new{ background:#00c853; }
    .badge-used{ background:#37474f; }
    .badge-sale{ background:#ff5252; }

    .card-body{ padding:18px 20px; }
    .car-title{ font-size:22px; font-weight:700; margin-bottom:6px; }
    .car-meta{ opacity:.75; margin-bottom:12px; }
    .car-price{ font-size:26px; font-weight:800; color:#ffdd55; margin-bottom:12px; }

    .car-link{ color:#9bbcff; font-size:14px; }

    /* PAGINATION */
    .pagination{ display:flex; gap:10px; margin-top:35px; justify-content:center; }
    .page-btn{
        padding:10px 16px; background:#151a2c; color:#fff;
        border-radius:10px; border:1px solid rgba(255,255,255,0.12);
        transition:.2s;
    }
    .page-btn:hover{ transform:translateY(-3px); }
    .active-page{ background:#ffcc00; color:#000; font-weight:800; }
</style>
{% endblock %}


{% block content %}
<div class="wrapper">

    <!-- SIDEBAR ADVANCED FILTERS -->
    <form method="GET" class="sidebar">
        <h3>Filtre avansate</h3>

        <div class="f-item">
            <label>Combustibil</label>
            <select name="fuel">
                <option value="">Oricare</option>
                <option value="Benzina">BenzinÄƒ</option>
                <option value="Motorina">MotorinÄƒ</option>
                <option value="Hibrid">Hibrid</option>
                <option value="Electric">Electric</option>
            </select>
        </div>

        <div class="f-item">
            <label>PreÈ› maxim</label>
            <input type="number" name="max_price" placeholder="Ex: 20000">
        </div>

        <div class="f-item">
            <label>An minim</label>
            <input type="number" name="min_year" placeholder="2015">
        </div>

        <div class="f-item">
            <label>Kilometri max.</label>
            <input type="number" name="max_km" placeholder="150000">
        </div>

        <button class="filter-cta" style="margin-top:10px; width:100%; background:#ffcc00; padding:12px; border-radius:12px; border:none; font-weight:800; color:#000;">AplicÄƒ filtre</button>
    </form>

    <!-- MAIN CONTENT -->
    <div>
        <div class="promo-banner">ðŸ”¥ Super oferte ale lunii â€“ Reduceri pÃ¢nÄƒ la 30% la modelele selecÈ›ionate!</div>

        <div class="sort-bar">
            <div style="font-size:26px;font-weight:800;">Toate maÈ™inile</div>
            <select name="sort">
                <option value="">SorteazÄƒ dupÄƒâ€¦</option>
                <option value="price_asc">PreÈ› crescÄƒtor</option>
                <option value="price_desc">PreÈ› descrescÄƒtor</option>
                <option value="year_desc">An descrescÄƒtor</option>
                <option value="km_asc">Km crescÄƒtor</option>
            </select>
        </div>

        <div class="cars-modern-grid">
    {% for c in cars %}
    <a href="{% url 'car_details' c.id %}" class="car-wow">

        <!-- Badges -->
        <div class="wow-badge-area">
            <span class="wow-badge {{ c.is_new|yesno:'new,used' }}">
                {% if c.is_new %}Nou{% else %}Rulat{% endif %}
            </span>

            {% if c.has_discount %}
            <span class="wow-badge sale">-{{ c.discount }}%</span>
            {% endif %}
        </div>

        <!-- Image + Video -->
        <div class="wow-media">
            {% if c.video_url %}
                <video class="wow-video" muted loop preload="none">
                    <source src="{{ c.video_url }}" type="video/mp4">
                </video>
            {% endif %}

            <img src="{{ c.Image.url }}" class="wow-image">
        </div>

        <!-- Text -->
        <div class="wow-body">
            <h3>{{ c.Name }}</h3>
            <p class="meta">{{ c.Year }} â€¢ {{ c.Km }} km â€¢ {{ c.Fuel }}</p>
            <div class="price">{{ c.Price }} â‚¬</div>
            <span class="details">Vezi detalii â†’</span>
        </div>

    </a>
    {% endfor %}
</div>


        <!-- PAGINATION -->
        <div class="pagination">
        {% if page_obj.has_previous %}
            <a class="page-btn" href="?page={{ page_obj.previous_page_number }}">&laquo;</a>
        {% endif %}
        <span class="page-btn active-page">{{ page_obj.number }}</span>
        {% if page_obj.has_next %}
            <a class="page-btn" href="?page={{ page_obj.next_page_number }}">&raquo;</a>
        {% endif %}
    </div>

    </div>

</div>
{% endblock %}

{% block scripts %}{% endblock %}
